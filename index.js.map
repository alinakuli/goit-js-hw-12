{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst myApiKey = \"54376573-ff3a12932ea688fe06ebe4bfa\";\n\n\nexport async function getImagesByQuery(query, page) {\n    try {\n        const response = await axios.get(\"https://pixabay.com/api/\", {\n            params: {\n                key: myApiKey,\n                q: query,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: \"true\",\n                page: page,\n                per_page: 15,\n            }\n        });\n        return response.data;\n    } catch (error) {\n        return error;\n    }\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nexport const loadMore = document.querySelector(\".load-more\");\n\nexport function createGallery(images) {\n    const markup = images.hits.map(image => `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${image.webformatURL}\"\n      alt=\"${image.tags}\"\n    />\n  </a>\n  <ul class = stats>\n          <li class=\"stat\">\n            <p class=\"stat-name\">Likes</p>\n            <p class=\"stat-number\">${image.likes}</p>\n          </li>\n          <li class=\"stat\">\n            <p class=\"stat-name\">Views</p>\n            <p class=\"stat-number\">${image.views}</p>\n          </li>\n          <li class=\"stat\">\n            <p class=\"stat-name\">Comments</p>\n            <p class=\"stat-number\">${image.comments}</p>\n          </li>\n          <li class=\"stat\">\n            <p class=\"stat-name\">Downloads</p>\n            <p class=\"stat-number\">${image.downloads}</p>\n          </li>\n        </ul>\n</li>`\n    ).join(\"\")\n    \n    gallery.insertAdjacentHTML(\"beforeend\", markup);\n\n    const lightbox = new SimpleLightbox(\".gallery a\", {\n      captionsData: \"alt\",\n      captionDelay: 250,\n    });\n    lightbox.refresh();\n}\n\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\n\nexport function showLoader() {\n  loader.classList.remove(\"is-hidden\");\n}\n\nexport function hideLoader() {\n  loader.classList.add(\"is-hidden\");\n}\n\nexport function showLoadMoreButton() {\n  loadMore.classList.remove(\"is-hidden\");\n}\n\nexport function hideLoadMoreButton() {\n  loadMore.classList.add(\"is-hidden\");\n}","// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport {  getImagesByQuery } from './js/pixabay-api';\nimport { createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton, loadMore } from './js/render-functions';\n\nconst form = document.querySelector(\".form\");\nlet page = 1;\nlet query;\nconst perPage = 15;\nlet totalHits;\nlet totalPages;\n\n\nform.addEventListener(\"submit\", async (event) => {\n    try {\n        event.preventDefault();\n        hideLoadMoreButton();\n        page = 1;\n        query = form.elements[\"search-text\"].value.trim();\n        if (!query) return;\n        form.reset()\n        clearGallery()\n        showLoader()\n\n        const images = await getImagesByQuery(query, page);\n        console.log(images);\n        \n        \n        if (images.hits.length === 0) {\n            hideLoader()\n            iziToast.error(\n                {\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n                    titleColor: '#fff',\n                    messageColor: '#fff',\n                    backgroundColor: '#ef4040',\n                }\n            )\n            return;\n        };\n\n        totalHits = images.totalHits;\n        totalPages = Math.ceil(totalHits / perPage);\n\n        createGallery(images)\n        hideLoader()\n        showLoadMoreButton()\n        page += 1;\n        checkForPages(page, totalPages)\n    } catch (error) {\n        console.log(error);\n        \n        return iziToast.error(\n                {\n                    message: 'Something went wrong',\n                    titleColor: '#fff',\n                    messageColor: '#fff',\n                    backgroundColor: '#ef4040',\n                })\n        \n    };\n\n})\n\nloadMore.addEventListener(\"click\", async (event) => {\n    try {\n    const images = await getImagesByQuery(query, page);\n        showLoader()\n        createGallery(images)\n        hideLoader()\n        page += 1;\n        checkForPages(page, totalPages)\n        smoothScroll();\n        return;\n    } catch (error) {\n        console.log(error);\n        \n        return iziToast.error(\n                {\n                    message: 'Something went wrong',\n                    titleColor: '#fff',\n                    messageColor: '#fff',\n                    backgroundColor: '#ef4040',\n                })\n        }\n})\n\nfunction checkForPages(page, totalPages) {\n    if (page > totalPages) {\n        hideLoadMoreButton()\n            return iziToast.error(\n                {\n                    message: \"We're sorry, but you've reached the end of search results.\",\n                    titleColor: '#fff',\n                    messageColor: '#fff',\n                    backgroundColor: '#ef4040',\n                }\n            )\n    }\n}\n\nfunction smoothScroll() {\n    const firstPicture = document.querySelector(\".gallery-item\");\n    console.log(firstPicture);\n    \n    if (!firstPicture) return;\n\n    const height = firstPicture.getBoundingClientRect().height;\n    console.log(height);\n\n    window.scrollBy({\n        top: height * 2,\n        behavior: \"smooth\",\n    })\n}"],"names":["myApiKey","getImagesByQuery","query","page","axios","error","gallery","loader","loadMore","createGallery","images","markup","image","SimpleLightbox","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","perPage","totalHits","totalPages","event","iziToast","checkForPages","smoothScroll","firstPicture","height"],"mappings":"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"}