{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst myApiKey = \"54376573-ff3a12932ea688fe06ebe4bfa\";\n\n\nexport async function getImagesByQuery(query, page) {\n    try {\n        const response = await axios.get(\"https://pixabay.com/api/\", {\n            params: {\n                key: myApiKey,\n                q: query,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: true,\n                page: page,\n                per_page: 15,\n            }\n        });\n        \n        return response.data;\n    } catch (error) {\n        throw new Error(\"getImagesByQuery\");\n    }\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nexport const loadMore = document.querySelector(\".load-more\");\n\nexport function createGallery(images) {\n    const markup = images.map(image => `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${image.webformatURL}\"\n      alt=\"${image.tags}\"\n    />\n  </a>\n  <ul class = stats>\n          <li class=\"stat\">\n            <p class=\"stat-name\">Likes</p>\n            <p class=\"stat-number\">${image.likes}</p>\n          </li>\n          <li class=\"stat\">\n            <p class=\"stat-name\">Views</p>\n            <p class=\"stat-number\">${image.views}</p>\n          </li>\n          <li class=\"stat\">\n            <p class=\"stat-name\">Comments</p>\n            <p class=\"stat-number\">${image.comments}</p>\n          </li>\n          <li class=\"stat\">\n            <p class=\"stat-name\">Downloads</p>\n            <p class=\"stat-number\">${image.downloads}</p>\n          </li>\n        </ul>\n</li>`\n    ).join(\"\")\n    \n    gallery.insertAdjacentHTML(\"beforeend\", markup);\n\n    const lightbox = new SimpleLightbox(\".gallery a\", {\n      captionsData: \"alt\",\n      captionDelay: 250,\n    });\n    lightbox.refresh();\n}\n\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\n\nexport function showLoader() {\n  loader.classList.remove(\"is-hidden\");\n}\n\nexport function hideLoader() {\n  loader.classList.add(\"is-hidden\");\n}\n\nexport function showLoadMoreButton() {\n  loadMore.classList.remove(\"is-hidden\");\n}\n\nexport function hideLoadMoreButton() {\n  loadMore.classList.add(\"is-hidden\");\n}","// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport {  getImagesByQuery } from './js/pixabay-api';\nimport { createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton, loadMore } from './js/render-functions';\n\nconst form = document.querySelector(\".form\");\nlet page = 1;\nlet query;\nconst perPage = 15;\nlet totalPages;\n\n\nform.addEventListener(\"submit\", async (event) => {\n    try {\n        event.preventDefault();\n        hideLoadMoreButton();\n\n        query = form.elements[\"search-text\"].value.trim();\n        if (!query) return;\n\n        page = 1;\n        clearGallery()\n        showLoader()\n\n        const images = await getImagesByQuery(query, page);\n        \n        \n        if (!images.hits.length) {\n            hideLoader()\n            iziToast.error(\n                {\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n                    titleColor: '#fff',\n                    messageColor: '#fff',\n                    backgroundColor: '#ef4040',\n                }\n            )\n            return;\n        };\n\n        totalPages = Math.ceil(images.totalHits / perPage);\n\n        createGallery(images.hits)\n        hideLoader()\n        showLoadMoreButton()\n        page += 1;\n        checkForPages(page, totalPages)\n\n        form.reset()\n\n    } catch (error) {\n        hideLoader()\n        console.log(error);\n        \n            iziToast.error(\n                {\n                    message: 'Something went wrong',\n                    titleColor: '#fff',\n                    messageColor: '#fff',\n                    backgroundColor: '#ef4040',\n                })\n        \n        return;\n    };\n\n})\n\nloadMore.addEventListener(\"click\", async (event) => {\n    try {\n        showLoader()\n        hideLoadMoreButton()\n\n        const images = await getImagesByQuery(query, page);\n        createGallery(images.hits)\n\n        showLoadMoreButton()\n        hideLoader()\n        page += 1;\n        checkForPages(page, totalPages)\n        smoothScroll();\n\n        return;\n    } catch (error) {\n        hideLoader();\n        \n        return iziToast.error(\n            \n                {\n                    message: 'Something went wrong',\n                    titleColor: '#fff',\n                    messageColor: '#fff',\n                    backgroundColor: '#ef4040',\n                })\n        }\n})\n\nfunction checkForPages(page, totalPages) {\n    if (page > totalPages) {\n        hideLoadMoreButton()\n\n            return iziToast.error(\n                {\n                    message: \"We're sorry, but you've reached the end of search results.\",\n                    titleColor: '#fff',\n                    messageColor: '#fff',\n                    backgroundColor: '#ef4040',\n                }\n            )\n    }\n}\n\nfunction smoothScroll() {\n    const firstPicture = document.querySelector(\".gallery-item\");\n    if (!firstPicture) return;\n\n    const height = firstPicture.getBoundingClientRect().height;\n\n    window.scrollBy({\n        top: height * 2,\n        behavior: \"smooth\",\n    })\n}"],"names":["myApiKey","getImagesByQuery","query","page","axios","gallery","loader","loadMore","createGallery","images","markup","image","SimpleLightbox","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","perPage","totalPages","event","iziToast","checkForPages","error","smoothScroll","firstPicture","height"],"mappings":"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"}